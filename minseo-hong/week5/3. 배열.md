배열
=============

# 1. 고정 길이 배열과 가변 길이 배열

## 1.1. 고정 길이 배열

배열은 기본적으로 고정된 크기의 배열만 생성이 가능하며, 변수를 이용해 배열의 크기를 지정할 수 없다.

```c
int arr[10];
```

## 1.2. 가변 길이 배열

프로그램 실행 중에 원하는 크기만큼 생성하는 배열을 **가변 길이 배열**이라고 한다. 가변 길이 배열의 경우 변수를 이용해 배열의 크기를 지정할 수 있다.

```c
int size;

scanf("%d", &size);

int arr[size];
```

### 1.2.1. C99 표준

C99 표준이 제정되면서 가변 길이 배열 기능도 추가되어 위와 같이 사용이 가능하다. 하지만 표준이 제정되었다고 하더라도 컴파일러별로 가변 길이 배열 기능이 지원이 안되는 경우가 있다.

### 1.2.2. 컴파일러에 따른 차이

#### 1.2.2.1. GCC

GCC 컴파일러는 가변 길이 배열 기능을 지원한다.

#### 1.2.2.2. Visual Studio

Visual Studio의 컴파일러는 가변 길이 배열 기능을 지원하지 않는다.

# 2. 메모리 할당을 통한 배열

메모리 할당을 이용하면 어떤 컴파일러든지에 상관없이 고정 길이 배열과 가변 길이 배열을 생성할 수 있다.

## 2.1. 고정 길이 배열

크기가 10인 int형 배열을 포인터와 메모리 할당을 이용해 아래와 같이 선언할 수 있다.

```c
int *arr1 = malloc(sizeof(int) * 10);
```

이렇게 생성된 배열은 일반 배열과 똑같은 방법으로 사용이 가능하다.

```c
arr1[0] = 3;
arr1[9] = 5;

printf("%d\n", arr1[0]);
printf("%d\n", arr1[9]);
```

## 2.2. 가변 길이 배열

크기를 담을 변수를 선언한 후 값을 입력받는다.

```c
int size;

scanf("%d", &size);
```

크기가 size인 int형 배열을 포인터와 메모리 할당을 이용해 아래와 같이 선언할 수 있다.

```c
int *arr2 = malloc(sizeof(int) * size);
```

이 또한 일반 배열과 똑같은 방법으로 사용이 가능하다.

```c
arr2[0] = 3;
arr2[9] = 5;

printf("%d\n", arr2[0]);
printf("%d\n", arr2[9]);
```

# 3. 포인터 연산

`[]`을 이용하지 않고 포인터 연산으로 배열에 있는 요소를 참조할 수 있다.

## 3.1. 대괄호 기호 ([ ])

배열의 요소를 참조할 때 일반적으로 `[]`을 이용한다.

```c
printf("%d\n", arr[3]); // 5
```

### 3.1.1. 배열의 포인터

이때 대괄호 앞에 있는 `arr`는 포인터이다.

```c
printf("%p\n", arr) // 0055FC24
```

## 3.2. 포인터 연산

포인터 연산을 이용해 아래와 같이 배열에 있는 요소를 참조할 수 있다.

```c
printf("%d\n", *(arr + 3)); // 5
```

이때 포인터에 더해지는 값은 실제로는 3이 아니며 arr가 int형 배열일 때 int의 크기인 4바이트에 3을 곱하여 메모리상에서 배열의 4번째 값(인덱스 3)을 참조하게 된다.

### 3.2.1. [ ]와 포인터 연산의 비교

결국 `[]`은 아래의 연산을 수행해주는 연산자라 할 수 있다.

```c
arr[i] = *(arr + i)
```
